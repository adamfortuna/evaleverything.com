
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>eval everything</title>
  <meta name="author" content="Adam Fortuna">
  
  <meta name="description" content="XKCD Style Graphs With R Written November 12, 2013 Comments visualizations Adam Fortuna works at Envy Labs on Code School with a focus on JavaScript &hellip;">
  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://evaleverything.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/evaleverything" rel="alternate" title="eval everything" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
</head>

<body class="home">

<div id='wrap'>
<header class='topbar' role="banner">
  <div class="container">
    <div class='col-md-offset-2 col-sm-4 col-xs-7'>
      <div class="navbar-header">
        <a href="/" class="navbar-brand">eval everything</a>
      </div>
    </div>

    <nav role="navigation" class='col-lg-3 col-md-3 col-sm-8 col-xs-5'>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/archives">Archives</a></li>
        <li><a href="/">Latest</a></li>
      </ul>
    </nav>
  </div>
</header>



<main id='content' role='main'>
  
  
  
    <article>
  <header>
    <div class='container'>
      <div class='col-md-10 col-md-offset-2'>
        <h1 class="title">
          <a href="/2013/11/12/xkcd-style-graphs-with-r/">XKCD Style Graphs With R</a>
        </h1>
        <ul class='meta group'>
  <li>Written November 12, 2013</li>
  
    <li><a href="/2013/11/12/xkcd-style-graphs-with-r/#disqus_thread" data-disqus-identifier="evaleverything-/2013/11/12/xkcd-style-graphs-with-r">Comments</a></li>
  

  
  
    <li><a class='tag' href='/tags/visualizations/'>visualizations</a></li>
  
</ul>
      </div>
    </div>
  </header>

  <div class='container content'>
    <section class='col-md-7 col-md-offset-2'>    
      
        <div class='pull-right author'>
  <img src='/images/adam-fortuna.png' alt='Adam Fortuna' class='img-rounded'/>
<p><a href='http://adamfortuna.com'>Adam Fortuna</a> works at <a href='http://envylabs.com'>Envy Labs</a> on <a href='http://codeschool.com'>Code School</a> with a focus on JavaScript, Ruby, Rails &amp; improving education.</span></p>
</div>
      
      <div class='post-content'>
        
          <p>Two years I started doing <a href="http://adamfortuna.com/2-years-of-crossfit/">CrossFit</a> and have since gotten kind of into it. After the CrossFit Open last year, I decided to dive a little deeping into the stats available and was able to prove, using public data, that I&rsquo;m not very good at CrossFit.</p>

<p>Even still, the data set was amazing &mdash; over a hundred thousand people participated in a series of workouts, with details like height, age, gender and weight on most of them. With this I started looking for patterns. Do taller people do better at a specific movement? How much does experience in CrossFit affect ranking? This lead me down a rabbit hole that is the statistics community.</p>

<h2>Getting Started with R</h2>

<div class='pull-left '><p><img src="/images/codeschool/try-r.png" alt="Try R" class="icon" /></p>
</div>


<p>I got my introduction to R when writing the JavaScript/HTML front-end for Code Schools <a href="http://tryr.codeschool.com">Try R</a> course. <a href="https://twitter.com/jaymcgavren">Jay McGavren</a> did an amazing job on the content. I still laugh thinking about finding the mean number of limbs in a group of pirates who had obviously been through some hard times.</p>

<p>Try R is still one of my favorite Code School courses. It&rsquo;s free, and only takes about an hour to go through. It also introduces some of the core concepts of R that come in handy reading the code below.</p>

<h2>(Re)Learnings Statistics</h2>

<div class='pull-right '><p>Coursera has some amazing courses on statistics.</p>
</div>


<p>Like most people, I took some statistics in college, but don&rsquo;t use too much of it on a daily basis. Lucky for me, <a href="http://coursera.org/">Coursera</a> has some amazing stats classes. The one I ended up going through was called <a href="https://class.coursera.org/introstats-001/class">Statistics: Making Sense of Data</a>, which hit close to what I was wanting to learn.</p>

<p>One of the nice parts about the format was it was taught similar to how it would be taught at a university &mdash; with the main instructors teaching the statistics side, then with shorter followup videos detailing how to do the same thing in R.</p>

<h2>A Boxplot Graph</h2>

<p>Armed with new information about how to draw information from&hellip; other information, I went ahead and started making my first graph &mdash; a handy boxplot. With all the information loaded into a Postgres database and put together the following script.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'><span class="c1"># Setup Postgres connection</span>
</span><span class='line'>library<span class="p">(</span><span class="s">&#39;RPostgreSQL&#39;</span><span class="p">)</span>
</span><span class='line'>drv <span class="o">&lt;-</span> dbDriver<span class="p">(</span><span class="s">&quot;PostgreSQL&quot;</span><span class="p">)</span>
</span><span class='line'>con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>drv<span class="p">,</span> dbname<span class="o">=</span><span class="s">&quot;crossfitopen_development&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Query the database</span>
</span><span class='line'>rs <span class="o">&lt;-</span> dbSendQuery<span class="p">(</span>con<span class="p">,</span><span class="s">&quot;select info_time_crossfitting, wod1_score </span>
</span><span class='line'><span class="s">        from athletes where mens=FALSE and info_time_crossfitting </span>
</span><span class='line'><span class="s">        is not null and wod1_score &gt; 5&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Load in our 70k rows</span>
</span><span class='line'>results <span class="o">&lt;-</span> fetch<span class="p">(</span>rs<span class="p">,</span>n<span class="o">=</span><span class="m">-1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Give names to our columns</span>
</span><span class='line'>colnames<span class="p">(</span>results<span class="p">)</span> <span class="o">=</span> c<span class="p">(</span><span class="s">&#39;Experience&#39;</span><span class="p">,</span> <span class="s">&#39;Score&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Create R variables for each column in the database</span>
</span><span class='line'><span class="c1"># Creates:</span>
</span><span class='line'><span class="c1">#   Experience vector</span>
</span><span class='line'><span class="c1">#   Score vector</span>
</span><span class='line'>attach<span class="p">(</span>results<span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Order our Experience vector</span>
</span><span class='line'>Experience <span class="o">=</span> factor<span class="p">(</span>Experience<span class="p">,</span> c<span class="p">(</span><span class="s">&#39;Less than 6 months&#39;</span><span class="p">,</span> <span class="s">&#39;6-12 months&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;1-2 years&#39;</span><span class="p">,</span> <span class="s">&#39;2-4 years&#39;</span><span class="p">,</span> <span class="s">&#39;4+ years&#39;</span><span class="p">,</span> <span class="s">&#39;Decline to answer&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Create Barplot!</span>
</span><span class='line'>boxplot<span class="p">(</span>Score<span class="o">~</span>Experience<span class="p">,</span> range<span class="o">=</span><span class="m">0</span><span class="p">,</span>  main<span class="o">=</span><span class="s">&#39;WOD 13.1 By Experience (Women)&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This pulled up an easy to understand Boxplot.</p>

<div class='pull-right '><p>Statistical proof I’m bad at CrossFit</p>
</div>


<p><img src="/images/xkcd-style-graphs-with-r/experience.png" alt="Experience" /></p>

<p>Each vertical box represents what 50% of the popuplation on that vertical achieved, with the line inside the boxplot representing the median for that segment. Seeing as how I&rsquo;d been CrossFitting for 1-2 years, and only scored 100 on this workout, I was sad to see my score was in the bottom 25% for my group. I knew I had to look deeper to see how I compared.</p>

<h2>Having Fun With XKCD</h2>

<p>I stumbled upon the <a href="http://xkcd.r-forge.r-project.org/">XKCD Package For R</a> not too long after, and decided to have some fun with this data. This library is plain out amazing, and impressive. Looking at the examples on the page alone I knew it was way over my head being still very new to R. But with one chart in mind &mdash; my ranking on the 5 workouts &mdash; I decided to start writing a graph using the XKCD style.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>library<span class="p">(</span>extrafont<span class="p">)</span>
</span><span class='line'>loadfonts<span class="p">()</span>
</span><span class='line'>library<span class="p">(</span>xkcd<span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Bring in the data! </span>
</span><span class='line'><span class="c1">#   workout=c(1:5) - creates a range from 1-5, so 1,2,3,4,5</span>
</span><span class='line'><span class="c1">#   c(16...) - These are my percentiles for the five workouts, resepectively</span>
</span><span class='line'>scores <span class="o">&lt;-</span> data.frame<span class="p">(</span>workout<span class="o">=</span>c<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">),</span> rank<span class="o">=</span>c<span class="p">(</span><span class="m">16.71</span><span class="p">,</span> <span class="m">4.21</span><span class="p">,</span> <span class="m">19.61</span><span class="p">,</span> <span class="m">4.9</span><span class="p">,</span> <span class="m">19.38</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Define how much of the X and Y access to show.</span>
</span><span class='line'><span class="c1"># In our case, we&#39;ll show all of the Y access,</span>
</span><span class='line'><span class="c1"># but only 1-5 on the X access side.</span>
</span><span class='line'>xrange <span class="o">&lt;-</span> range<span class="p">(</span>scores<span class="o">$</span>workout<span class="p">)</span>
</span><span class='line'>yrange <span class="o">&lt;-</span> range<span class="p">(</span>c<span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">100</span><span class="p">))</span>
</span><span class='line'>ratioxy <span class="o">&lt;-</span> diff<span class="p">(</span>xrange<span class="p">)</span> <span class="o">/</span> diff<span class="p">(</span>yrange<span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Let&#39;s create XKCD style stick figure</span>
</span><span class='line'><span class="c1"># I blatantly copied this part from the sample code</span>
</span><span class='line'>mapping <span class="o">&lt;-</span> aes<span class="p">(</span>x<span class="p">,</span>  y<span class="p">,</span>
</span><span class='line'>                scale<span class="p">,</span>
</span><span class='line'>                ratioxy<span class="p">,</span>
</span><span class='line'>                angleofspine <span class="p">,</span>
</span><span class='line'>                anglerighthumerus<span class="p">,</span>
</span><span class='line'>                anglelefthumerus<span class="p">,</span>
</span><span class='line'>                anglerightradius<span class="p">,</span>
</span><span class='line'>                angleleftradius<span class="p">,</span>
</span><span class='line'>                anglerightleg<span class="p">,</span>
</span><span class='line'>                angleleftleg<span class="p">,</span>
</span><span class='line'>                angleofneck<span class="p">)</span>
</span><span class='line'><span class="c1"># The c(1.5,4.5) reprents the X coordinates of each of the 2 stick figures --</span>
</span><span class='line'><span class="c1"># likewise for the y coordinate. The rest of these control the arms and legs</span>
</span><span class='line'>dataman <span class="o">&lt;-</span> data.frame<span class="p">(</span> x<span class="o">=</span> c<span class="p">(</span><span class="m">1.5</span><span class="p">,</span><span class="m">4.5</span><span class="p">),</span> y<span class="o">=</span>c<span class="p">(</span><span class="m">80</span><span class="p">,</span> <span class="m">70</span><span class="p">),</span>
</span><span class='line'>                       scale <span class="o">=</span> <span class="m">17</span><span class="p">,</span>
</span><span class='line'>                       ratioxy <span class="o">=</span> ratioxy<span class="p">,</span>
</span><span class='line'>                       angleofspine <span class="o">=</span>  <span class="o">-</span>pi<span class="o">/</span><span class="m">2</span>  <span class="p">,</span>
</span><span class='line'>                       anglerighthumerus <span class="o">=</span> c<span class="p">(</span><span class="o">-</span>pi<span class="o">/</span><span class="m">6</span><span class="p">,</span> <span class="o">-</span>pi<span class="o">/</span><span class="m">6</span><span class="p">),</span>
</span><span class='line'>                       anglelefthumerus <span class="o">=</span> c<span class="p">(</span><span class="o">-</span>pi<span class="o">/</span><span class="m">2</span> <span class="o">-</span> pi<span class="o">/</span><span class="m">6</span><span class="p">,</span> <span class="o">-</span>pi<span class="o">/</span><span class="m">2</span> <span class="o">-</span> pi<span class="o">/</span><span class="m">6</span><span class="p">),</span>
</span><span class='line'>                       anglerightradius <span class="o">=</span> c<span class="p">(</span>pi<span class="o">/</span><span class="m">5</span><span class="p">,</span> <span class="o">-</span>pi<span class="o">/</span><span class="m">5</span><span class="p">),</span>
</span><span class='line'>                       angleleftradius <span class="o">=</span> c<span class="p">(</span>pi<span class="o">/</span><span class="m">5</span><span class="p">,</span> <span class="o">-</span>pi<span class="o">/</span><span class="m">5</span><span class="p">),</span>
</span><span class='line'>                       angleleftleg <span class="o">=</span> <span class="m">3</span><span class="o">*</span>pi<span class="o">/</span><span class="m">2</span>  <span class="o">+</span> pi <span class="o">/</span> <span class="m">12</span> <span class="p">,</span>
</span><span class='line'>                       anglerightleg <span class="o">=</span> <span class="m">3</span><span class="o">*</span>pi<span class="o">/</span><span class="m">2</span>  <span class="o">-</span> pi <span class="o">/</span> <span class="m">12</span><span class="p">,</span>
</span><span class='line'>                       angleofneck <span class="o">=</span> runif<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="o">*</span>pi<span class="o">/</span><span class="m">2</span><span class="o">-</span>pi<span class="o">/</span><span class="m">10</span><span class="p">,</span> <span class="m">3</span><span class="o">*</span>pi<span class="o">/</span><span class="m">2</span><span class="o">+</span>pi<span class="o">/</span><span class="m">10</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Those squigly lines that connect text to a character are easy to draw.</span>
</span><span class='line'><span class="c1"># Each needs an x/y start point and an x/y end point. The library does the rest.</span>
</span><span class='line'>datalines <span class="o">&lt;-</span> data.frame<span class="p">(</span>xbegin<span class="o">=</span>c<span class="p">(</span><span class="m">1.9</span><span class="p">,</span><span class="m">4.2</span><span class="p">,</span><span class="m">2</span><span class="p">),</span>
</span><span class='line'>                        ybegin<span class="o">=</span>c<span class="p">(</span><span class="m">80</span><span class="p">,</span><span class="m">70</span><span class="p">,</span><span class="m">77</span><span class="p">),</span>
</span><span class='line'>                        xend<span class="o">=</span>c<span class="p">(</span><span class="m">2.1</span><span class="p">,</span><span class="m">3.9</span><span class="p">,</span><span class="m">2.8</span><span class="p">),</span>
</span><span class='line'>                        yend<span class="o">=</span>c<span class="p">(</span><span class="m">88</span><span class="p">,</span><span class="m">80</span><span class="p">,</span><span class="m">68</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Using ggplot to do the actual graphing -- an versatile graphing library for R</span>
</span><span class='line'>p <span class="o">&lt;-</span> ggplot<span class="p">()</span> <span class="o">+</span> geom_smooth<span class="p">(</span>mapping<span class="o">=</span>aes<span class="p">(</span>x<span class="o">=</span>workout<span class="p">,</span> y <span class="o">=</span>rank<span class="p">),</span>
</span><span class='line'>                            data<span class="o">=</span>scores<span class="p">,</span>
</span><span class='line'>                            method<span class="o">=</span><span class="s">&quot;loess&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Do ALL the generating!</span>
</span><span class='line'><span class="c1"># This includes putting everything together and adding the sample text we want to write.</span>
</span><span class='line'><span class="c1"># Of course, this text should be written using the xkcd font.</span>
</span><span class='line'>p <span class="o">+</span> xkcdaxis<span class="p">(</span>xrange<span class="p">,</span>yrange<span class="p">)</span> <span class="o">+</span>
</span><span class='line'>   ylab<span class="p">(</span><span class="s">&quot;Percentile&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>   xkcdman<span class="p">(</span>mapping<span class="p">,</span> dataman<span class="p">)</span> <span class="o">+</span>
</span><span class='line'>   annotate<span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">,</span> x<span class="o">=</span><span class="m">2.4</span><span class="p">,</span> y <span class="o">=</span> <span class="m">93</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;There&#39;s a lot of\nroom up here&quot;</span><span class="p">,</span> family<span class="o">=</span><span class="s">&quot;xkcd&quot;</span> <span class="p">)</span> <span class="o">+</span>
</span><span class='line'>   annotate<span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">,</span> x<span class="o">=</span><span class="m">4.1</span><span class="p">,</span> y <span class="o">=</span> <span class="m">83</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;Let&#39;s do 7 minutes of Burpees!&quot;</span><span class="p">,</span> family<span class="o">=</span><span class="s">&quot;xkcd&quot;</span> <span class="p">)</span> <span class="o">+</span>
</span><span class='line'>   annotate<span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">,</span> x<span class="o">=</span><span class="m">2.8</span><span class="p">,</span> y <span class="o">=</span> <span class="m">62</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;I will use your face\nas a wallball target...&quot;</span><span class="p">,</span> family<span class="o">=</span><span class="s">&quot;xkcd&quot;</span> <span class="p">)</span> <span class="o">+</span>
</span><span class='line'>   xkcdline<span class="p">(</span>aes<span class="p">(</span>xbegin<span class="o">=</span>xbegin<span class="p">,</span>ybegin<span class="o">=</span>ybegin<span class="p">,</span>xend<span class="o">=</span>xend<span class="p">,</span>yend<span class="o">=</span>yend<span class="p">),</span>datalines<span class="p">,</span> xjitteramount <span class="o">=</span> <span class="m">0.11</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Running this in the R console, generates a pretty slick graph:</p>

<p><img src="/images/xkcd-style-graphs-with-r/xkcd.png" alt="Experience" /></p>

<p>Even if I don&rsquo;t see myself creating loads of XKCD style graphs, getting one made was a lot of fun.
If you&rsquo;re curious what else you can do with the XKCD library, check out the <a href="http://cran.r-project.org/web/packages/xkcd/vignettes/xkcd-intro.pdf">documentation</a>.</p>

        
      </div>
    </section>
  </div>

  
</article>
    
  
    <article>
  <header>
    <div class='container'>
      <div class='col-md-10 col-md-offset-2'>
        <h1 class="title">
          <a href="/2013/10/04/teaching-ios-7-at-codeschool/">Teaching iOS 7 at Code School</a>
        </h1>
        <ul class='meta group'>
  <li>Written October 04, 2013</li>
  
    <li><a href="/2013/10/04/teaching-ios-7-at-codeschool/#disqus_thread" data-disqus-identifier="evaleverything-/2013/10/04/teaching-ios-7-at-codeschool">Comments</a></li>
  

  
  
    <li><a class='tag' href='/tags/code-school/'>Code School</a>, <a class='tag' href='/tags/os-x/'>OS X</a>, <a class='tag' href='/tags/ios/'>iOS</a></li>
  
</ul>
      </div>
    </div>
  </header>

  <div class='container content'>
    <section class='col-md-7 col-md-offset-2'>    
      
      <div class='post-content'>
        
          <p>A long time ago, at a <a href="http://adamfortuna.com/wwdc/">WWDC</a> far away, 3 travelers from <a href="http://codeschool.com">Code School</a> journeyed to Apple Mecca in search of new technologies. The goal was to see what was new in iOS 7, while looking for ways to best teach this new addition to the iOS world.</p>

<p>This week we released the result of that experience.</p>

<h2>Think Outside the Browser</h2>

<p>Up to this point, every Code School course has used an in browser editor. This simple interaction makes sense for learning a new topic from scratch. You don&rsquo;t need to install anything on your local system, and you can see what it&rsquo;s like to develop in a sandbox. After you&rsquo;ve learned the ropes, you want a taste of programming in the real world. <a href="https://twitter.com/eallam">Eric Allam</a> thought there could be a better way to pull this off.</p>

<div class='pull-left '><p><img src="/images/codeschool/core-ios-7.png" alt="Core iOS 7" class="icon" /></p>
</div>


<p><a href="http://ios7.codeschool.com">Core iOS 7</a> goes a different path. After watching a video on a topic, you&rsquo;ll be prompted to download a zip file. Unzip this file and you&rsquo;ll have an entire Xcode project, with a unique identifier in it that Code School uses to identify you. In this project you complete a series of tasks, then run the tests in Xcode. The results of which are sent to the course, and you see the results in your browser.</p>

<p>The easiest way to see how this all fits together is the 10 second video Eric created for the <a href="http://blog.codeschool.com/post/62915764253/introducing-core-ios-7">Code School Blog</a>.</p>

<div class='pull-right '><p>For a more elaborate take on this course, check out the Erics post on the <a href="http://blog.codeschool.com/post/62915764253/introducing-core-ios-7">Code School Blog</a>.</p>
</div>




<iframe src="//player.vimeo.com/video/75897272" width="100%" height="350" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>


<p>Did you see that? We use <a href="/2013/09/08/native-javascript-notifications/">native browser notifications</a> and <a href="/2013/09/07/response-streams-with-rails-4-and-redis/">response streams</a> to push the latest results back immediately.</p>

<p>Native editing using the same tool you&rsquo;d use, coupled with an interactive course with videos makes for a more direct connection between you and the code. The course prompts you with tasks to complete in Xcode, you perform them, run the test suite, and the site is updated to reflect what tasks are left to complete. The result of this is that you&rsquo;ll see feedback in the browser immediately following a test run from Xcode.</p>

<h2>Videos in Context</h2>

<div class='pull-right '><p>You probably should just watch everything he’s ever done.</p>
</div>


<p>Recently <a href="http://worrydream.com/">Bret Victor</a> put out an inspiring, interactive version of his last talk, <a href="http://worrydream.com/MediaForThinkingTheUnthinkable/">Media for Thinking the Unthinkable</a>. This presentation of the content hit close to home. Ever since <a href="http://railsforzombies.com">Rails for Zombies</a>, Code School&rsquo;s courses have featured videos, followed by in browser challenges. The only way to see the video was to navigate back to it, view the video, and then go back to the challenge. We&rsquo;ve long known we could do better, but this format was the kick we needed at the right time.</p>

<p>In the footer of interactive version of his <strong>Media for Thinking the Unthinkable</strong> talk, Bret goes into the thought behind this method of displaying the content:</p>

<blockquote><p>But a talk is a poor knowledge-container. It&#8217;s opaque. The viewer can&#8217;t skim, browse, or get a gist at a glance. Ideas can&#8217;t be looked up as needed; they feel fleeting. The medium works well for entertainment — watch and enjoy — but not for a toolbox.</p><footer><small>Media for Thinking the Unthinkable</small> <cite><a href='http://worrydream.com/MediaForThinkingTheUnthinkable/'>worrydream.com/&hellip;</a></cite></footer></blockquote>




<div class='pull-right '><p>Videos are a toolbox.</p>
</div>


<p>Our videos are a toolbox. You pull one out and use to solve the challenges that come after, so why would you want to navigate away to rewatch one? Putting them in context only made sense. Each task you are prompted to complete has an associated position within the video you previously watched which you can call up with a click, at the moment you need it.</p>

<h2>iOS Education</h2>

<p><a href="https://twitter.com/eallam">Eric Allam</a> and <a href="https://twitter.com/jonfriskics">Jon Friskics</a> did an amazing job on the content for this course, while <a href="http://justinmezzell.com/">Justin Mezzell</a> and <a href="https://twitter.com/dandenney">Dan Denney</a> created an vivid design. I worked exclusively on the Rails/JavaScript side which presented some extremely exciting challenges to solve &mdash; and served as the content for the first few posts on this blog. I don&rsquo;t know what the future of iOS education will be, but I&rsquo;d like to think we&rsquo;re pushing the boundries and continuing to improve.</p>

        
      </div>
    </section>
  </div>

  
</article>
    
  
    <article>
  <header>
    <div class='container'>
      <div class='col-md-10 col-md-offset-2'>
        <h1 class="title">
          <a href="/2013/09/08/native-javascript-notifications/">Native Notifications with JavaScript</a>
        </h1>
        <ul class='meta group'>
  <li>Written September 08, 2013</li>
  
    <li><a href="/2013/09/08/native-javascript-notifications/#disqus_thread" data-disqus-identifier="evaleverything-/2013/09/08/native-javascript-notifications">Comments</a></li>
  

  
  
    <li><a class='tag' href='/tags/code-school/'>Code School</a>, <a class='tag' href='/tags/javascript/'>JavaScript</a>, <a class='tag' href='/tags/os-x/'>OS X</a></li>
  
</ul>
      </div>
    </div>
  </header>

  <div class='container content'>
    <section class='col-md-7 col-md-offset-2'>    
      
      <div class='post-content'>
        
          <p>In browser notifications have made a lot of progress in the last few years. Hell, native notifications have made a lot of progress in that time too. Just a few years ago, everyone on the Mac was using <a href="http://growl.info/">Growl</a>. With the release of Mac OS X 10.8 (Mountain Lion) the one purpose of Growl was now built in and everyone I know made the switch to using native notifications.</p>

<div class='pull-right '><p>Warning: Link to the official spec.</p>
</div>


<p>Notifications caught on with Mac App developers. <a href="http://notifications.spec.whatwg.org/">HTML 5 Notifications</a> have had a slower growth curve as the various browsers focus in on a single standard. As of this writing, here&rsquo;s a recap of where the different browsers stand when it comes to supporting notifications.</p>

<p>OS X Mavericks has expanded support for notifications that builds heavily on this. Here&rsquo;s what&rsquo;s public on the topic so far:</p>

<blockquote><p>Once users have signed up for notifications from your website in Safari, you can send them push notifications that appear just like app notifications, even when Safari isn’t running. Users can then click on your push notification to launch your website.</p><footer><small>OS X Mavericks for Developers</small> <cite><a href='https://developer.apple.com/osx/whats-new/'>developer.apple.com/osx/&hellip;</a></cite></footer></blockquote>


<p>In other words, it&rsquo;s time to hop on board the notification train if you want another route of reaching your sites visitors. Let&rsquo;s check out how this applies to the different browsers.</p>

<h2>Common Traits</h2>

<div class='pull-right raw '><p>Read the source from this project to understand how browsers implement notifications</p>
</div>


<p>The major browsers (setting aside IE) have a few patterns in common right now that we can use to style our behavior pattern around. If you want see how to use notifications in different browsers, check out the <a href="https://github.com/ttsvetko/HTML5-Desktop-Notifications/">HTML5 Desktop Notifications</a> project on GitHub. It&rsquo;s worth reading over the source code.</p>

<h2>Request Permission</h2>

<p>In order to send notifications in all browsers, you&rsquo;ll need to request permission to do so. In that very long spec, there are 3 permission levels noted:</p>

<ul>
<li><code>default</code> &ndash; No permission granted or denied</li>
<li><code>granted</code> &ndash; The user has granted permission to send notifications</li>
<li><code>denied</code> &ndash; The user has denied permission</li>
</ul>


<p>If permission is denied you won&rsquo;t be able to request permission again in the current session. If you try to send a notification without having been granted permission, nothing will happen.</p>

<h2>Send A Message</h2>

<p>Once you have permission, you&rsquo;ll be able send down a notification with the following attributes:</p>

<ul>
<li><code>title</code> &ndash; Should be short and to the point</li>
<li><code>body</code> &ndash; You&rsquo;ll have a bit more room to work with here. Unfortunately, in Safari this will be truncated</li>
<li><code>icon</code> &ndash; In Chrome and Firefox, you can send over whatever icon you want. This isn&rsquo;t being served by Notification Center, so there is more flexibility here.</li>
</ul>


<p>When the message is shown, there are also a few events that we can tie into for added flexibility:</p>

<ul>
<li><code>onshow</code> &ndash; When the notification is first shown.</li>
<li><code>onclick</code> &ndash;  When the user clicks on the notification. By default this will bring the window into focus.</li>
<li><code>onclose</code> &ndash; When the notification is closed, either by the user or programatically.</li>
<li><code>onerror</code> &ndash; Trigger if the notification cannot be presented to the user</li>
</ul>


<p>Here&rsquo;s a few examples of how these notifications look in different browsers.</p>

<div class='pull-left '><p><img src="/images/icons/safari.png" alt="Safari" class="icon" /></p>
</div>


<h3>Safari</h3>

<p>For Safari notifications, you won&rsquo;t be able to provide an icon unfortunately. Instead it&rsquo;ll always use the Safari icon. It will also show the hostname where the notification came from though, which is unique to Safari.</p>

<p><img src="/images/posts/native-javascript-notifications/safari-notification-small.png" alt="Safari Notification" /></p>

<p>One of the nice parts of this notification is that it will sync up with your other notifications. For instance, if you have one notification from Xcode and another from a website, they&rsquo;ll show up stacked rather than on top of each other.</p>

<h3>Mavericks</h3>

<p>Not exactly a JavaScript implementation, but worth noting that notifications in Mavericks behave much differently than HTML 5 notifications. They more closely resemble iOS notifications, where you&rsquo;re pushing to Apple&rsquo;s servers, and they&rsquo;re pushing to the end user.</p>

<p><img src="/images/posts/native-javascript-notifications/mavericks-notification-small.png" alt="Mavericks Notification" /></p>

<p>The addition of a custom icon here is definitely a plus. This alert is from a <a href="http://kandutech.net/">Safari Push Notification Demo</a> which should only work if you&rsquo;re running Safari in Mavericks. If you clicked on that alert, you&rsquo;d get taken to a page that describes how it works:</p>

<blockquote><p>When you allowed this website to send you push notifications, we generated a 4 digit code and put it in a database along with your Mac&#8217;s push token. When a push notification is triggered through our servers, we resolve the 4 digit code to your Mac&#8217;s token. Once we have your token, we tell Apple&#8217;s servers what the notification should look like, and where it should go. Apple&#8217;s push notification service then delivers the notification we generated to your Mac.</p><footer><small>Safari Push Notification Demo</small> <cite><a href='http://kandutech.net/clicked'>kandutech.net/clicked/&hellip;</a></cite></footer></blockquote>




<div class='pull-left '><p><img src="/images/icons/chrome.png" alt="Chrome" class="icon" /></p>
</div>


<h3>Chrome</h3>

<p>Chrome notifications show up square, which stands out from the rounded look of OS X and Firefox notifications. It also shows up larger in all dimensions</p>

<div class='pull-right '><p>Chromes notifications are significantly larger than Notification Center.</p>
</div>


<p><img src="/images/posts/native-javascript-notifications/chrome-notification-small.png" alt="Chrome Notification" /></p>

<p>Unlike Safari notifications, this will stay up until it is dismissed.</p>

<div class='pull-left '><p><img src="/images/icons/firefox.png" alt="Firefox" class="icon" /></p>
</div>


<h3>Firefox</h3>

<p>The Firefox notification would be prettiest out of the box, but the entire body is shown as a link! For all notifications, clicking on it takes you to the page, but Firefox attempts to make it more apparent. The appearance ends up suffering due to this choice.</p>

<div class='pull-right '><p>Why is the body a link Firefox? WHY?</p>
</div>


<p><img src="/images/posts/native-javascript-notifications/firefox-notification-small.png" alt="Firefox Notification" /></p>

<div class='pull-left '><p><img src="/images/icons/ie.png" alt="Chrome" class="icon" /></p>
</div>


<h3>Windows</h3>

<p>While there are no system level notifications in Windows (I don&rsquo;t think?), but Internet Explorer 9 and up allow you to add an icon overlay on the browsers icon. This allows for some feedback in this browser. You can see an example of this in the Readme for the <a href="https://github.com/ttsvetko/HTML5-Desktop-Notifications/">HTML5 Desktop Notifications</a> project on GitHub.</p>

<p>Chrome and Firefox on Windows support notifications that behave similar to their Mac counterparts.</p>

<h2>Demo</h2>

<p>Want to see how notifications look in your browser? Try out the <a href="http://ttsvetko.github.io/HTML5-Desktop-Notifications/">HTML5 Notifications Demo</a> to find out.</p>

<h2>Update</h2>

<p>For an example of how this technique is used, read the post on <a href="/2013/10/04/teaching-ios-7-at-codeschool/">Teaching iOS 7 at Code School</a>. This post details the user experience that can be achieved using native browser notifications.</p>

<div class='credits'><h2>Credits</h2><ol>
  <li>Icons for Safari, Chrome and Firefox by <a href="http://dribbble.com/shots/1032875-Flat-Icons">Stefano Tirloni</a>.</li>
  <li>Internet Explorer Icon by <a href="http://onelittledesigner.com/rapidweaver/web-icons/free-flat-browser-icons/">1 Little Designer</a>.</li>
</ol>
</div>




        
      </div>
    </section>
  </div>

  
</article>
    
  

  <div class="container">
  <div class="col-md-7 col-md-offset-2">
    <ul class="pager">
      
      
        <li class="next">
          <a href="/page/2/" role="next">Older &rarr;</a>
        </li>
      
    </ul>
  </div>
</div>
</main>
</div>
<footer>
  <div class='container'>
    <div class='col-md-3 col-md-offset-2 col-xs-12'>
      <h2>About</h2>
      <p>eval everything is a blog written by Adam Fortuna with a focus on Ruby, JavaScript and web development. You'll find posts about whatever comes along when working on Code School.</p>
    </div>

    <div class='col-md-2 col-xs-6 col-sm-4'>
      <h2>Posts By Tag</h2>
      <!-- Put your popular tags here -->
<ul>
  <li><a href='/tags/design'>Design</a></li>
  <li><a href='/tags/javascript'>JavaScript</a></li>
  <li><a href='/tags/ruby'>Ruby</a></li>
</ul>
    </div>

    <div class='col-md-2 col-xs-6 col-sm-4'>
      <h2>Pages</h2>
<ul>
  <li><a href="/">Latest</a></li>
  <li><a href="/archives">Archive</a></li>
  <li><a href="/about">About</a></li>
</ul>
    </div>

    <div class='col-md-3 col-xs-12 col-sm-4'>
      <h2>Contact</h2>
<p>Follow me on <a href='http://twitter.com/adamfortuna'>Twitter</a></p>
<p>©2013 <a href='http://adamfortuna.com'>Adam Fortuna</a></p>
<p>Powered by <a href='http://octopress.org'>Octopress</a></p>
    </div>
  </div>
</footer>

<script>
  var disqus_shortname = "evaleverything";
</script>
<script src="//go.disqus.com/count.js" async></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-90326-16']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</body>
</html>

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Native JavaScript Notifications - eval everything</title>
  <meta name="author" content="Adam Fortuna">

  
  <meta name="description" content="Native JavaScript Notifications Written September 04, 2013 | Comments | JavaScript Adam Fortuna works at Code School on courses and mostly focuses &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://evaleverything.com/2013/09/04/native-javascript-notifications">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="eval everything" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-90326-16']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body class="post">

<header class='topbar' role="banner">
  <div class="container">
    <div class="col-md-7 col-md-offset-2">
      <div class="navbar-header">
        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="navbar-brand">eval everything</a>
      </div>
      <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/">Latest</a></li>
          <li><a href="/archives">Archives</a></li>
        </ul>
      </nav>
    </div>
  </div>
</header>



<main id='content' role='main'>
  
  
  <article>
  <header>
    <div class='container'>
      <div class='col-md-7 col-md-offset-2'>
        <h1 class="title">
          <a href="/2013/09/04/native-javascript-notifications/">Native JavaScript Notifications</a>
        </h1>
        <p class='meta'>
          Written September 04, 2013
          | <a href="#comments">Comments</a>
          | <a class='tag' href='/tags/javascript/'>JavaScript</a>
        </p>
      </div>
    </div>
  </header>

  <div class='container content'>
    <section class='col-md-7 col-md-offset-2'>
    
      
        <div class='pull-right author'>
  <img src='/images/adam-fortuna.jpg' alt='Adam Fortuna' class='img-rounded'/>
  <p><a href='http://adamfortuna.com'>Adam Fortuna</a> works at <a href='http://codeshool.com'>Code School</a> on courses and mostly focuses on JavaScript and Ruby.</span>
  </p>
</div>
      

      <div class='post-content'>
        
          <p>If you&rsquo;re on the fence about updating an older application to use Rails 4, the addition of <code>ActionController::Live</code>
might be helpful in making your decision a little easier.</p>

<h2>A Basic Connection</h2>

<p>Aaron Patterson wrote a great post about <a href="http://tenderlovemaking.com/2012/07/30/is-it-live.html">Live Streaming in Rails</a>, over a year ago, but the interface is mostly
the same today. That post is still a good starting point for <code>ActionController::Live</code>.</p>

<p>I first ran into the subject when working on Code School&rsquo;s <a href="http://rails4.codeschool.com/">Rails 4: Zombie Outlaws</a> course where it&rsquo;s mention how
to use it in cooperation with Redis.</p>

<div class='pull-left code'>
If you connected to this example in a browser, you&#8217;d see 3 lines of text then disconnect.
</div>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ActivitiesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
</span><span class='line'>  <span class="kp">include</span> <span class="ss">ActionController</span><span class="p">:</span><span class="ss">:Live</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">index</span>
</span><span class='line'>    <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">[</span><span class="s2">&quot;Content-Type&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;text/event-stream&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="mi">3</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
</span><span class='line'>      <span class="n">response</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span> <span class="s2">&quot;data: Iteration </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="nb">sleep</span> <span class="mi">3</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">rescue</span> <span class="no">IOError</span>
</span><span class='line'>    <span class="c1"># Client disconnected</span>
</span><span class='line'>  <span class="k">ensure</span>
</span><span class='line'>    <span class="n">response</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">close</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Visiting this page isn&rsquo;t all that interesting, but all the components are there. The connection is established, data is
writtten back to it, then once there is nothing more to send, the <code>stream</code> is closed. This will end that server request,
ending it for the user as well.</p>

<blockquote><p>If you connected to this example in a browser, you&#8217;d see 3 lines of text then disconnect.</p></blockquote>


<p>Visiting this page isn&rsquo;t all that interesting, but all the components are there. The connection is established, data is
writtten back to it, then once there is nothing more to send, the <code>stream</code> is closed. This will end that server request,
ending it for the user as well.</p>

<p>Visiting this page isn&rsquo;t all that interesting, but all the components are there. The connection is established, data is
writtten back to it, then once there is nothing more to send, the <code>stream</code> is closed. This will end that server request,
ending it for the user as well.</p>

<ul>
<li>Some list here</li>
<li>With multiple elements</li>
<li>how does it look?</li>
</ul>


<p>Visiting this page isn&rsquo;t all that interesting, but all the components are there. The connection is established, data is
writtten back to it, then once there is nothing more to send, the <code>stream</code> is closed. This will end that server request,
ending it for the user as well.</p>

        
      </div>
    </section>    
  </div>

  
    <div class='comments' id='comments'>
      <div class='container'>
        <section class='col-md-7 col-md-offset-2'>
          <h2>Comments</h2>
          <div id="disqus_thread"></div>
        </section>
      </div>
    </div>
  
</article>
</main>

<footer>
  <div class='container'>
    <div class='col-md-3 col-md-offset-2'>
      <h2>About</h2>
      <p>eval everything is place for Adam Fortuna to write about things he comes across while working on Code School with a heavy focus on JavaScript, Backbone.js, Ember.js, jQuery, Ruby on Rails and D3.</p>
    </div>

    <div class='col-md-2'>
      <h2>Posts By Tag</h2>
      <ul>
        <li><a href="/tags/javascript">JavaScript</a></li>
        <li><a href="/tags/ruby">Ruby</a></li>
        <li><a href="/tags/ruby-on-rails">Ruby on Rails</a></li>
      </ul>
    </div>

    <div class='col-md-2'>
      <h2>Pages</h2>
      <ul>
        <li><a href="/">Latest</a></li>
        <li><a href="/archive">Archive</a></li>
        <li><a href="/about">About</a></li>
      </ul>
    </div>

    <div class='col-md-3'>
      <h2>Contact</h2>
      <p>Follow me on <a href='http://twitter.com/adamfortuna' target='_blank'>Twitter</a></p>
      <p>Â©2013 <a href='http://adamfortuna.com' target='_blank'>Adam Fortuna</a>.</p>
      <p>Powered by <a href='http://octopress.org'>Octopress</a></p>
    </div>
  </div>
</footer>

<script>
  var disqus_shortname = "evaleverything";
</script>
<script src="//go.disqus.com/count.js" async></script>
<script src="//go.disqus.com/embed.js" async></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-90326-16']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</body>
</html>